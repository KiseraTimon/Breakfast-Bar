<!--Template Reference-->
{% extends 'template.html' %}

<!--Document Title-->
{% block title%}
Breakfast Bar | Menu
{% endblock %}

<!--Independent CSS-->
{% block css %}
<link rel="stylesheet" href="{{url_for('static', filename='css/menu.css')}}">
{% endblock %}

<!--Page Body-->
{% block body %}
{% if menu %}
    </section>
    <!--Page Title-->
    {% include '/menu/assets/title.html' %}

    <!--Content Filter-->
    {% include '/menu/assets/filter.html' %}

    <!--Menu Grid-->
    {% include '/menu/assets/grid.html' %}
{% else %}
    <section class="container section menu-list">
        <p>There are no menu items to show at the moment</p>
    </section>
{% endif %}
{% endblock %}

<!--Independent JS-->
{% block js %}
<script>
document.addEventListener('DOMContentLoaded', () => {
    const searchButton = document.querySelector('.btn.btn-primary');
    const filterSection = document.querySelector('.advanced-search-container');

    searchButton.addEventListener('click', () => {
        const params = new URLSearchParams();

        // Search input
        const searchInput = filterSection.querySelector('.search-input').value;
        if (searchInput) params.append('search', searchInput);

        // Category select
        const categorySelect = filterSection.querySelector('.search-select');
        if (categorySelect && categorySelect.value) {
            params.append('category', categorySelect.value);
        }

        // Redirecting
        const menuUrl = searchButton.dataset.url;
        window.location.href = `${menuUrl}?${params.toString()}`;
    });
});
</script>

{% endblock %}
